<div *ngIf="patient$ | async as patient; else loading">
  <div *ngIf="instrument$ | async as instrument; else loading">
    <div *ngIf="screening$ | async as screening; else loading">
      <feelback-doctor-action-bar
        [screening]="screening"
        (printEvent)="questionnaire.print()"
      ></feelback-doctor-action-bar>

      <div class="header">
        <div class="box">
          <feelback-doctor-patient-info
            [patient]="patient"
          ></feelback-doctor-patient-info>
        </div>

        <div class="box">
          <feelback-doctor-instrument-info
            [instrument]="instrument"
            [image]="false"
          ></feelback-doctor-instrument-info>
        </div>
      </div>

      <feelback-doctor-screening-consultation
        [screening]="screening"
      ></feelback-doctor-screening-consultation>

      <div class="wrapper">
        <div id="questionnaire">
          <feelback-doctor-screening-questionnaire
            #questionnaire
            [screening]="screening"
            [payload]="instrument.payload"
          ></feelback-doctor-screening-questionnaire>
        </div>
        <div id="overview">
          <feelback-doctor-screening-overview
            [screening]="screening"
            [diagram]="instrument.diagram"
          ></feelback-doctor-screening-overview>
        </div>
      </div>
    </div>
  </div>
</div>

<ng-template #loading>
  <feelback-doctor-loading></feelback-doctor-loading>
</ng-template>
