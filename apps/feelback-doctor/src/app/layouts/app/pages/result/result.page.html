<div class="header">
  <div class="box">
    <feelback-doctor-patient-info
      *ngIf="patient$ | async as patient; else loadingPatient"
      [patient]="patient"
    ></feelback-doctor-patient-info>
    <ng-template #loadingPatient>
      <feelback-doctor-loading></feelback-doctor-loading>
    </ng-template>
  </div>

  <div class="box">
    <feelback-doctor-instrument-info
      *ngIf="instrument$ | async as instrument; else loadingInstrument"
      [instrument]="instrument"
    ></feelback-doctor-instrument-info>
    <ng-template #loadingInstrument>
      <feelback-doctor-loading></feelback-doctor-loading>
    </ng-template>
  </div>
</div>

<div *ngIf="instrument$ | async as instrument; else loading">
  <div *ngIf="screening$ | async as screening; else loading">
    <feelback-doctor-screening-consultation
      [screening]="screening"
    ></feelback-doctor-screening-consultation>

    <div class="wrapper">
      <div id="questionnaire">
        <feelback-doctor-screening-questionnaire
          [screening]="screening"
          [payload]="instrument.payload"
        ></feelback-doctor-screening-questionnaire>
      </div>
      <div id="overview">
        <feelback-doctor-screening-overview
          [screening]="screening"
          [diagram]="instrument.diagram"
        ></feelback-doctor-screening-overview>
      </div>
    </div>
  </div>
</div>

<ng-template #loading>
  <feelback-doctor-loading></feelback-doctor-loading>
</ng-template>
